import './polyfills.server.mjs';
import{A as oe,B as p,C as ae,D as O,E as ce,F as u,G as de,H as le,I as d,J as c,K as C,L as ge,M as m,N as he,O as I,P as _,Q,R as j,S as W,U as pe,Y as ue,_ as me,a as S,aa as fe,b as k,c as q,ca as ve,d as g,da as A,e as X,ea as L,f as V,fa as be,g as F,ga as we,h as x,ha as Ce,i as v,ia as Ie,j as b,ja as Ae,k as h,l as K,m as $,ma as ye,n as M,o as ee,p as R,q as U,r as te,s as N,sa as Ee,t as w,u as B,v as ie,w as ne,x as re,y as se,z}from"./chunk-W6OT6OCP.mjs";import{a as Y,h as Z}from"./chunk-KRLCULJA.mjs";var xe=["video"],Re=["canvas"];function Ue(r,i){if(r&1){let e=ge();d(0,"div",6),m("click",function(){ie(e);let n=he();return ne(n.rotateVideoInput(!0))}),c()}}var J=class r{constructor(i,e,t){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=e,this._imageAsDataUrl=i,this._imageData=t}static getDataFromDataUrl(i,e){return i.replace(`data:${e};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=r.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}},H=class{static getAvailableVideoInputs(){return!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices?Promise.reject("enumerateDevices() not supported."):new Promise((i,e)=>{navigator.mediaDevices.enumerateDevices().then(t=>{i(t.filter(n=>n.kind==="videoinput"))}).catch(t=>{e(t.message||t)})})}},Se=(()=>{class r{constructor(){this.width=640,this.height=480,this.videoOptions=r.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=r.DEFAULT_IMAGE_TYPE,this.imageQuality=r.DEFAULT_IMAGE_QUALITY,this.imageCapture=new O,this.initError=new O,this.imageClick=new O,this.cameraSwitched=new O,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(e){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=e.subscribe(()=>{this.takeSnapshot()})}set switchCamera(e){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=e.subscribe(t=>{typeof t=="string"?this.switchToVideoInput(t):this.rotateVideoInput(t!==!1)})}static getMediaConstraintsForDevice(e,t){let n=t||this.DEFAULT_VIDEO_OPTIONS;return e&&(n.deviceId={exact:e}),n}static getDeviceIdFromMediaStreamTrack(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){let t=e.getConstraints().deviceId;return r.getValueFromConstrainDOMString(t)}}static getFacingModeFromMediaStreamTrack(e){if(e){if(e.getSettings&&e.getSettings()&&e.getSettings().facingMode)return e.getSettings().facingMode;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().facingMode){let t=e.getConstraints().facingMode;return r.getValueFromConstrainDOMString(t)}}}static isUserFacing(e){let t=r.getFacingModeFromMediaStreamTrack(e);return t?t.toLowerCase()==="user":!1}static getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if(typeof e=="object"){if(e.exact)return String(e.exact);if(e.ideal)return String(e.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(e=>{this.initError.next({message:e}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){let e=this.nativeVideoElement,t={width:this.width,height:this.height};e.videoWidth&&(t.width=e.videoWidth,t.height=e.videoHeight);let n=this.canvas.nativeElement;n.width=t.width,n.height=t.height;let s=n.getContext("2d");s.drawImage(e,0,0);let o=this.imageType?this.imageType:r.DEFAULT_IMAGE_TYPE,a=this.imageQuality?this.imageQuality:r.DEFAULT_IMAGE_QUALITY,l=n.toDataURL(o,a),E=null;this.captureImageData&&(E=s.getImageData(0,0,n.width,n.height)),this.imageCapture.next(new J(l,o,E))}rotateVideoInput(e){if(this.availableVideoInputs&&this.availableVideoInputs.length>1){let t=e?1:this.availableVideoInputs.length-1,n=(this.activeVideoInputIndex+t)%this.availableVideoInputs.length;this.switchToVideoInput(this.availableVideoInputs[n].deviceId)}}switchToVideoInput(e){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(e,this.videoOptions)}videoResize(){}get videoWidth(){let e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)}get videoHeight(){let e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)}get videoStyleClasses(){let e="";return this.isMirrorImage()&&(e+="mirrored "),e.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){let e=this.nativeVideoElement;return e.videoWidth&&e.videoWidth>0&&e.videoHeight&&e.videoHeight>0?e.videoWidth/e.videoHeight:this.width/this.height}initWebcam(e,t){let n=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){let s=r.getMediaConstraintsForDevice(e,t);navigator.mediaDevices.getUserMedia({video:s}).then(o=>{this.mediaStream=o,n.srcObject=o,n.play(),this.activeVideoSettings=o.getVideoTracks()[0].getSettings();let a=r.getDeviceIdFromMediaStreamTrack(o.getVideoTracks()[0]);this.cameraSwitched.next(a),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=a?this.availableVideoInputs.findIndex(l=>l.deviceId===a):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(o=>{this.initError.next({message:o.message,mediaStreamError:o})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let e="auto";switch(this.mirrorImage&&(typeof this.mirrorImage=="string"?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}}return r.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&(this.nativeVideoElement.pause(),this.mediaStream.getTracks().forEach(e=>e.stop()))}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((e,t)=>{H.getAvailableVideoInputs().then(n=>{this.availableVideoInputs=n,e(n)}).catch(n=>{this.availableVideoInputs=[],t(n)})})}}return r.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},r.DEFAULT_IMAGE_TYPE="image/jpeg",r.DEFAULT_IMAGE_QUALITY=.92,r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=w({type:r,selectors:[["webcam"]],viewQuery:function(e,t){if(e&1&&(j(xe,7),j(Re,7)),e&2){let n;Q(n=W())&&(t.video=n.first),Q(n=W())&&(t.canvas=n.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",mirrorImage:"mirrorImage",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(e,t){e&1&&(d(0,"div",0),m("click",function(){return t.imageClick.next()}),d(1,"video",1,2),m("resize",function(){return t.videoResize()}),c(),le(3,Ue,1,0,"div",3),C(4,"canvas",4,5),c()),e&2&&(p(1),de(t.videoStyleClasses),u("width",t.videoWidth)("height",t.videoHeight),p(2),u("ngIf",t.allowCameraSwitch&&t.availableVideoInputs.length>1&&t.videoInitialized),p(1),u("width",t.width)("height",t.height))},dependencies:[ve],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:#0000002e}"]}),r})();var P=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=B({type:r}),r.\u0275inj=U({imports:[[A]]}),r})();var Me=(()=>{let i=class i{constructor(t){this.http=t,this.trigger=new S,this.nextWebcam=new S,this.sysImage=""}ngOnInit(){}getSnapshot(){this.trigger.next(void 0)}captureImg(t){this.webcamImage=t,this.sysImage=t.imageAsDataUrl,console.info("got webcam image",this.sysImage),this.sendImageToEndpoint(this.sysImage)}get invokeObservable(){return this.trigger.asObservable()}get nextWebcamObservable(){return this.nextWebcam.asObservable()}sendImageToEndpoint(t){return Z(this,null,function*(){let n=new FormData;n.append("image",this.dataURItoBlob(t));let s=new be({Accept:"*/*",Authorization:"Bearer 82e80ebaf984fa5045332258aecf63a00059e94bfedd91eed37520c0ce1c57f43f4ba4b0d8cafc342a3c01fbca0c43bc40d35a138edd9cb226a1b9729c6a4697be3193f4db5f710f4f1ad1fafcefdd5183ffec18cac1ee1ef1c4d1f9ff699960fea87f1bb294d702ff075515bb111a494781e88ea574363d6b8e65c22ca99f22"});try{let o=yield this.http.post("https://test-plantsense-cms.onrender.com/api/detect-plant",n,{headers:s}).toPromise();console.log("response received is ",o),o&&(this.result=o,console.log("result received is ",this.result),document.getElementById("type").innerHTML=this.result.result.classification.suggestions[0].name)}catch(o){console.error("error received is ",o)}})}dataURItoBlob(t){let n=atob(t.split(",")[1]),s=t.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(n.length),a=new Uint8Array(o);for(let l=0;l<n.length;l++)a[l]=n.charCodeAt(l);return new Blob([o],{type:s})}};i.\u0275fac=function(n){return new(n||i)(ae(we))},i.\u0275cmp=w({type:i,selectors:[["app-camera"]],standalone:!0,features:[_],decls:13,vars:4,consts:[[1,"container","mt-5"],[1,"col-md-12"],[3,"trigger","height","width","imageCapture"],[1,"btn","btn-danger",3,"click"],[1,"col-12"],["id","results"],["height","400px",3,"src"],["id","type"]],template:function(n,s){n&1&&(d(0,"div",0)(1,"h2"),I(2,"Identify from your plant!"),c(),d(3,"div",1)(4,"webcam",2),m("imageCapture",function(a){return s.captureImg(a)}),c()(),d(5,"div",1)(6,"button",3),m("click",function(){return s.getSnapshot()}),I(7," Take picture "),c()(),d(8,"div",4)(9,"div",5),I(10,"Picture taken here:"),c(),C(11,"img",6)(12,"p",7),c()()),n&2&&(p(4),u("trigger",s.invokeObservable)("height",700)("width",300),p(7),u("src",s.webcamImage==null?null:s.webcamImage.imageAsDataUrl,oe))},dependencies:[A,P,Se],styles:[".container[_ngcontent-%COMP%]{max-width:60rem;margin:0 auto}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.25rem}.container[_ngcontent-%COMP%]   webcam[_ngcontent-%COMP%]{margin-bottom:2rem;height:2rem}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:87%;padding:.75rem 1.5rem;margin-bottom:.5rem;font-size:1.25rem;font-weight:700;font-family:Josefin Slab,serif;color:#fff;background-color:#4b7235;border:none;border-radius:.25rem}.container[_ngcontent-%COMP%]   #results[_ngcontent-%COMP%]{text-align:center;margin-bottom:.625rem}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:87%;max-width:100%;height:auto;display:block;margin:0 auto 1rem}@media (max-width: 576px){.container[_ngcontent-%COMP%]{padding:.9375rem}}"]});let r=i;return r})();var Oe=(()=>{let i=class i{constructor(){this.title="plant-recognition-pwa"}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=w({type:i,selectors:[["app-root"]],standalone:!0,features:[_],decls:5,vars:0,consts:[[1,"container",2,"text-align","center"],["id","bottomBackground","src","assets/images/BottomPlants.22e232ac3401ddd17909.png","alt","BottomBackground"]],template:function(n,s){n&1&&(d(0,"div",0)(1,"H1"),I(2,"PlantSense"),c(),C(3,"app-camera")(4,"img",1),c())},dependencies:[A,Me,P,Ce],styles:["html[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Josefin Slab,serif;font-size:16px;color:#fff;background-color:#393f38}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;text-align:center;font-size:20px;color:#fff;width:100vw;height:100vh;background-color:#393f38}h1[_ngcontent-%COMP%]{font-size:30px;text-align:center;font-weight:700;margin:25px;font-family:Josefin Slab,serif;color:#fff}app-camera[_ngcontent-%COMP%]{width:100%}#bottomBackground[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%}"]});let r=i;return r})();var De=[];var T="Service workers are disabled or not supported by this browser";function Be(r){return V(()=>q(new Error(r)))}var y=class{constructor(i){if(this.serviceWorker=i,!i)this.worker=this.events=this.registration=Be(T);else{let t=F(i,"controllerchange").pipe(g(()=>i.controller)),n=V(()=>k(i.controller)),s=X(n,t);this.worker=s.pipe(b(f=>!!f)),this.registration=this.worker.pipe(M(()=>i.getRegistration()));let E=F(i,"message").pipe(g(f=>f.data)).pipe(b(f=>f&&f.type)).pipe($());E.connect(),this.events=E}}postMessage(i,e){return this.worker.pipe(h(1),ee(t=>{t.postMessage(Y({action:i},e))})).toPromise().then(()=>{})}postMessageWithOperation(i,e,t){let n=this.waitForOperationCompleted(t),s=this.postMessage(i,e);return Promise.all([s,n]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(i){let e;return typeof i=="string"?e=t=>t.type===i:e=t=>i.includes(t.type),this.events.pipe(b(e))}nextEventOfType(i){return this.eventsOfType(i).pipe(h(1))}waitForOperationCompleted(i){return this.eventsOfType("OPERATION_COMPLETED").pipe(b(e=>e.nonce===i),h(1),g(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},ze=(()=>{let i=class i{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new S,!t.isEnabled){this.messages=v,this.notificationClicks=v,this.subscription=v;return}this.messages=this.sw.eventsOfType("PUSH").pipe(g(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(g(s=>s.data)),this.pushManager=this.sw.registration.pipe(g(s=>s.pushManager));let n=this.pushManager.pipe(M(s=>s.getSubscription()));this.subscription=x(n,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(T));let n={userVisibleOnly:!0},s=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(s.length));for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return n.applicationServerKey=o,this.pushManager.pipe(M(a=>a.subscribe(n)),h(1)).toPromise().then(a=>(this.subscriptionChanges.next(a),a))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(T));let t=n=>{if(n===null)throw new Error("Not subscribed to push notifications.");return n.unsubscribe().then(s=>{if(!s)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(h(1),M(t)).toPromise()}decodeBase64(t){return atob(t)}};i.\u0275fac=function(n){return new(n||i)(N(y))},i.\u0275prov=R({token:i,factory:i.\u0275fac});let r=i;return r})(),Qe=(()=>{let i=class i{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=v,this.unrecoverable=v;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(T));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(T));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}};i.\u0275fac=function(n){return new(n||i)(N(y))},i.\u0275prov=R({token:i,factory:i.\u0275fac});let r=i;return r})();var Te=new te("NGSW_REGISTER_SCRIPT");function je(r,i,e,t){return()=>{if(!(L(t)&&"serviceWorker"in navigator&&e.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let n;if(typeof e.registrationStrategy=="function")n=e.registrationStrategy();else{let[o,...a]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":n=k(null);break;case"registerWithDelay":n=ke(+a[0]||0);break;case"registerWhenStable":n=a[0]?x(_e(r),ke(+a[0])):_e(r);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}r.get(ce).runOutsideAngular(()=>n.pipe(h(1)).subscribe(()=>navigator.serviceWorker.register(i,{scope:e.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function ke(r){return k(null).pipe(K(r))}function _e(r){return r.get(ue).isStable.pipe(b(e=>e))}function We(r,i){return new y(L(i)&&r.enabled!==!1?navigator.serviceWorker:void 0)}var D=class{};function Pe(r,i={}){return re([ze,Qe,{provide:Te,useValue:r},{provide:D,useValue:i},{provide:y,useFactory:We,deps:[D,z]},{provide:pe,useFactory:je,deps:[se,Te,D,z],multi:!0}])}var Ve={providers:[Ee(De),Ae(),Pe("ngsw-worker.js",{enabled:!me(),registrationStrategy:"registerWhenStable:30000"})]};var Le={providers:[ye()]},Fe=fe(Ve,Le);var Je=()=>Ie(Oe,Fe),Ft=Je;export{Ft as a};
